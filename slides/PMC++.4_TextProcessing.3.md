---
marp: true
paginate: true
style: |
    section {
        background-color: #fffff2;
        font-family: 'Palatino', 'Charter', 'STHeiti', 'Segoe UI Emoji';
    }
    section pre {
      font-size: 0.9em;
    }
    section ul {
      font-size: 0.95em;
    }

    section iframe {
      margin-top: 25px;
      width: 100% !important;
      height: 90%;
    }

    section iframe.h8 {
      width: 100% !important;
      height: 80%;
    }

    section iframe.h10 {
      width: 100% !important;
      height: 100%;
    }
---

<!-- theme: gaia -->

<style scoped>
h1 {
    text-align: center;
    position: relative;
    top: 30%;
    font-size: 1.8em;
}
</style>

# Text Processing III

---

### Looking back

Part Iï¼ˆLecture 8-10ï¼‰
* Agenda of Text Processing
* String Representations in C and C++
  * C styled string, `std::string`, `std::string_view`
* String Manipulation
  * Create/Contatenate/Join/Split/...
  * STL: `string`, `string_view` (14), `ranges` for `string`(20)
  * Libraries: *Boost*, *{fmt}*, (14) *Abseil*, (14) *range-v3*

---

### Looking back

Part II (Lecture 11)
* String examination
  * Getting string length in byte
  * *find*
    * `string`: `find / rfind / find_*_of`
    * `string`: `(23ï¼‰contains / (20) starts_with  / (20) ends_with`
    * `<algorithm>/<ranges>`: `find / search / includes`
    * *Boost.StringAlgorithm*

---

<style scoped>
h3 {
    text-align: center;
    position: relative;
    top: 30%;
    font-size: 1.5em;
}
</style>
### Discuss some topics other than C++ ...

---

### å­—ç¬¦ä¸²(string)ã€è¯­è¨€(language) ä¸ æ–‡å­—(writing system, or scripts)

å­—ç¬¦ä¸²æ˜¯ *å­—ç¬¦*(*Character*) çš„ â€œçº¿æ€§å­˜å‚¨â€ï¼ˆä¸²ï¼‰

ä¸»è¦è®¾è®¡æ¥è®°å½•æ–‡å­—

ä½†æ˜¯ä¸ä»…ä»…æ˜¯æ–‡å­—

*å­—ç¬¦* æ˜¯ç»è¿‡**ç¼–ç **çš„ *ä¿¡æ¯å•ä½*

---

### è¯­è¨€(language) å’Œ æ–‡å­—(writing system)

å…³è”ä½†æ˜¯å¹¶ä¸å®Œå…¨ä¸€è‡´çš„ä¸¤ä¸ªç³»ç»Ÿ

å­˜åœ¨æ²¡æœ‰æ–‡å­—çš„è¯­è¨€
* æ‰‹è¯­ç³»ç»Ÿ
* å‡ ä¹æ‰€æœ‰çš„ä¸Šå¤å½¢åˆ¶çš„è¯­è¨€éƒ½æ˜¯å…ˆäºæ–‡å­—å‡ºç°çš„
* ä¸ºæŸç§è¯­è¨€ï¼Œäººä¸ºå‘æ˜æ–‡å­—ï¼Œæ¯”å¦‚è¥¿å¤æ–‡ã€ä¼¯æ ¼é‡Œè‹—æ–‡
* å¤§éƒ¨åˆ†è¿˜åœ¨æ´»è·ƒä¸­çš„è¯­è¨€éƒ½æœ‰å¯¹åº”çš„æ–‡å­—

ä½†æ˜¯æ²¡æœ‰è¯­è¨€åŸºç¡€çš„æ–‡å­—åŸºæœ¬ä¸å­˜åœ¨

---

ä¸–ç•Œä¸Šå¤§çº¦æœ‰è¿‘7000ç§æ–‡å­—ï¼ŒåŒ…æ‹¬

* ç”±å†å²ä¼ æ‰¿ã€ç°åœ¨æ­£åœ¨ä½¿ç”¨çš„ï¼ˆè‹±è¯­ã€æ±‰è¯­ï¼‰ï¼›
* å†å²ä¸Šä½¿ç”¨ã€ä½†æ˜¯ç°åœ¨å·²ç»ä¸å†ä½¿ç”¨çš„ï¼ˆç”²éª¨æ–‡[æ ‡å‡†åŒ–ä¸­]ã€åœ£ä¹¦ä½“[U+13000 + U+1342F]ï¼‰ï¼›
* ä»å…¶ä»–ç³»ç»Ÿå€Ÿæ¥çš„ç¬¦å·ï¼ˆæ—¥è¯­æ±‰å­—ã€æœé²œè¯­æ±‰å­—ï¼‰ï¼›
* åŒ¹é…å·²æœ‰è¯­è¨€ç³»ç»Ÿæ‰€è®¾è®¡çš„ä¹¦å†™ç³»ç»Ÿï¼ˆè¶Šå—è¯­ã€æ±‰è¯­æ‹¼éŸ³ã€è¥¿å¤æ–‡ï¼‰ï¼›
* ä¸ºå£å¤´è¯­è¨€è®¾è®¡çš„ä¹¦å†™ç³»ç»Ÿï¼ˆæ³¨éŸ³è‹—æ–‡ï¼‰ï¼›
* åŠ©è®°ç³»ç»Ÿï¼ˆçº³è¥¿è¯­ä¸œå·´æ–‡[U+1AAC0 - U+1AFFF]
  * æˆ–è®¸äºŒç»´ç ä¹Ÿå¯ä»¥å½’å±åˆ°åŠ©å‰‚ç³»ç»Ÿä¸­

---

* è¯­ç´ æ–‡å­— - æ±‰å­—ã€åœ£ä¹¦ä½“ã€ç›é›…æ–‡ã€é”²å½¢æ–‡å­—
* è¡¨éŸ³æ–‡å­—
  * éŸ³èŠ‚æ–‡å­— - æ—¥æ–‡å‡åã€å½æ–‡ï¼ˆè€å¤´ç¯æ›¾åœ¨å®˜æ–¹æ³„éœ²èµ„æ–™ä¸­ä½¿ç”¨å½æ–‡ä½œä¸ºæ³¨éŸ³ï¼‰
  * æ‹¼éŸ³æ–‡å­—
    * å…¨éŸ³ç´ æ–‡å­— - æ‹‰ä¸ã€å¸Œè…Šã€è¥¿é‡Œå°”ã€éŸ©æ–‡ï¼ˆè°šæ–‡ï¼‰
    * å…ƒéŸ³é™„æ ‡æ–‡å­— - æ³°æ–‡ã€ç¼…ç”¸æ–‡ã€æ¢µæ–‡
    * è¾…éŸ³éŸ³ç´ æ–‡å­— - é˜¿æ‹‰ä¼¯ã€å¸Œä¼¯æ¥
    * åŠéŸ³èŠ‚æ–‡å­— - æ³¨éŸ³ç¬¦å·

---

### äº”å¤§å­—æ¯ç³»ç»Ÿ

æ‹‰ä¸ç³»æ–‡å­— - Latin - LatÄ«num

é˜¿æ‹‰ä¼¯ç³»æ–‡å­— - Arabric
Ø£ÙØ¨Ù’Ø¬ÙØ¯ÙÙŠÙÙ‘Ø© Ø¹ÙØ±ÙØ¨ÙÙŠÙÙ‘Ø©

è¥¿é‡Œå°”ç³»æ–‡å­— - Kirillica - ĞšĞ¸Ñ€Ğ¸ÌĞ»Ğ»Ğ¸Ñ†Ğ°

æ¢µæ–‡ - Sanskrit - à¤¸à¤‚à¤¸à¥à¤•à¥ƒà¤¤à¤¾ à¤µà¤¾à¤•à¥

æ±‰å­— - Chinese Characters - æ¼¢å­—

---

### å…¶å®ƒæœ‰é‡è¦å½±å“åŠ›çš„æ–‡å­—ç³»ç»Ÿ

è…“å°¼åŸºè¯­ - Phinican - ğ¤ƒğ¤ğ¤“ğ¤‰ğ¤Œ ğ¤Šğ¤ğ¤ğ¤ğ¤‰ğ¤Œ 

å©†ç½—ç±³ç³»ï¼ˆæ³¢å¯†ç³»ï¼‰æ–‡å­— - Brahmic scripts - ğ‘€©ğ‘†ğ‘€­ğ‘€¸ğ‘€³ğ‘†ğ‘€«ğ‘€» ğ‘€®ğ‘€ºğ‘€§ğ‘€º 
* æ˜¯ç°ä»£ä¸œå—äºšå¤šç§è¯­è¨€çš„çˆ¶ç³»è¯­è¨€ï¼Œæ¯”å¦‚æ³°æ–‡ã€‚

---

### éœ€è¦ç¼–ç çš„ç ä½

* *å­—ç´ *ï¼ˆ*Grapheme*ï¼‰åŠå…¶ å¼‚å†™
  * å­—ç´ æ˜¯æœ€å°å¯åŒºåˆ†çš„ä¹¦å†™å•ä½
  * å­—ç´ çš„å¼‚å†™(upper/lower cases, variant chinese characters)
    * Upper/lower case
      * A / a
    * Variant Chinese Characters
      * å›[U+56DE]ï¼Œå›˜[U+56D8], å›¬[U+56DC]

---

### éœ€è¦ç¼–ç çš„ç ä½

* ä¸åŒè¯­è¨€ç›¸åŒï¼ˆè¿‘ï¼‰æ–‡å­—æ˜¯å¦éœ€è¦å¤šä¸ªç ä½ï¼Ÿ
  * ä¸éœ€è¦
    * æ±‰è¯­æ‹¼éŸ³å£°è°ƒï¼š a (è‹±è¯­) / Äï¼ˆæ‹‰è„±ç»´äºšè¯­ï¼‰/ Ã ï¼ˆæ‹‰ä¸è¯­ç³»ï¼Œæ¯”å¦‚æ³•è¯­ã€æ„å¤§åˆ©è¯­ã€è‘¡è„ç‰™è¯­ï¼‰
  * [è¢«ç»Ÿä¸€](https://zh.m.wikipedia.org/zh-hans/%E4%B8%AD%E6%97%A5%E9%9F%93%E7%B5%B1%E4%B8%80%E8%A1%A8%E6%84%8F%E6%96%87%E5%AD%97)
    * ä¸­æ—¥éŸ©ç»Ÿä¸€è¡¨æ„æ–‡å­—ï¼ˆCJK Unified Ideographsï¼‰
      * æŠŠåˆ†åˆ«æ¥è‡ªä¸­æ–‡ã€æ—¥æ–‡ã€éŸ©æ–‡ã€è¶Šå—æ–‡ã€å£®æ–‡ã€ç‰çƒæ–‡ä¸­ï¼Œèµ·æºç›¸åŒã€æœ¬ä¹‰ç›¸åŒã€å½¢çŠ¶ä¸€æ ·æˆ–ç¨å¼‚çš„è¡¨æ„æ–‡å­—ï¼Œåœ¨ISO 10646åŠUnicodeæ ‡å‡†èµ‹äºˆç›¸åŒç¼–ç 
    * è¡¨æ„æ–‡å­—è®¤åŒåŸåˆ™ã€åŸå­—é›†åˆ†ç¦»åŸåˆ™ã€èµ·æºä¸åŒåŸåˆ™

---

### éœ€è¦ç¼–ç çš„ç ä½

CJKçš„ä¼˜ç‚¹å’Œç¼ºç‚¹

ä¸éœ€è¦ä»”ç»†åŒºåˆ«åŒä¸€ç‚¹ä½æ–‡å­—æ‰€å±è¯­è¨€ï¼Œåˆ©äºæœç´¢

åŒç‚¹ä½æ–‡å­—åœ¨ä¸åŒè¯­è¨€é—´å­˜åœ¨äº›è®¸å­—ä½“å·®å¼‚ï¼Œæ··æ’æ—¶å¦‚æœæ²¡æœ‰ç‰¹æ®Šçš„è®°å·æˆ–è€…æ’ç‰ˆç®—æ³•ï¼Œå·®å¼‚éš¾ä»¥ä¿ç•™ã€‚

---
![](media/hanzi_standard_fonts.png)

---
![](media/hanzi_standard_fonts_marked.png)

---
![](media/zhen.png)

---
### éœ€è¦ç¼–ç çš„ç ä½

* éš¹
* éµ» == (å°”é›…/é‡Šé¸Ÿ)ä³•é³©(foujiu) == é³º(fu)é´€(fou) == éµ“é´£
* ä¸Šå¤è¯»éŸ³ï¼šbu ku
* å¸ƒè°·
* æœé¹ƒ

---
<style scoped>
  ul {
    font-size: 0.875em;
  }
</style>
### éœ€è¦ç¼–ç çš„ç ä½

* *éŸ³ç´ * (*Symbol* in *Syllabus*, *phoneme*)
* *é™„åŠ ç¬¦å·*ï¼ˆæ¯”å¦‚*éŸ³è°ƒ*ï¼‰
  * çƒ­Òˆçš„Òˆå­—Òˆéƒ½Òˆå‡ºÒˆæ±—Òˆäº†Òˆ
  * U+0488ï¼Œè¥¿é‡Œå°”æ–‡ä¿®é¥°ç¬¦` Òˆ`
* *ç¬¦å·* (*Symbol*)
  * Emoji
    * ğŸ˜‚ [U+1F602]
  * å…­åå››å¦
    * ä·°ï¼ˆU+4DF0ï¼Œé©ï¼‰ä·±ï¼ˆU+4FD1ï¼Œé¼ï¼‰
  * åˆ¶è¡¨ç¬¦å·
    * â”œâ”´â”¬â”€â”¼

---
### éœ€è¦ç¼–ç çš„ç ä½

* *ç©ºç™½* (*Whitespace*) æˆ– *æ ‡ç‚¹ç¬¦å·*(*Punctuation*)  
* *æ§åˆ¶å­—ç¬¦* (*Control characters*)
  * ä¾‹å¦‚ï¼šCRç¬¦ [U+000D]
* å…¶ä»–
	* ä¼šåœ¨è®¨è®ºUnicodeçš„ç¼–ç å¹³é¢ä¸­å…·ä½“ä»‹ç»
---

### ä¸éœ€è¦ç¼–ç çš„éƒ¨åˆ†

* å­—ä½“/å­—å½¢
  * ä¸å¼‚ä½“å­—å¹¶éæ³¾æ¸­åˆ†æ˜
    * å¯¹äºå·²ç»ä¸å†æµé€šä¸”éš¾ä»¥æº¯æºçš„å¤æ–‡å­—æ¥è¯´ï¼Œå­—ä½“å’Œç‹¬ç«‹æ–‡å­—çš„åŒºåˆ«ç›¸å¯¹éš¾ä»¥åŒºåˆ†ï¼Œæ¯”å¦‚ç”²éª¨æ–‡
    * éš¶ä½“/æ¥·ä½“ï¼ˆå¼‚ä½“å­—ï¼‰ -> è¡Œä¹¦/è‰ä¹¦ï¼ˆå­—ä½“ï¼‰ -> ç®€åŒ–å­—ï¼ˆå¼‚ä½“å­—ï¼‰
* æ’ç‰ˆ/ä¹¦å†™é¡ºåº
  * LTR
  * ç«–å‘æ’ç‰ˆ - æ±‰è¯­ã€æ—¥è¯­
  * RTL(Right to Left) - é˜¿æ‹‰ä¼¯è¯­

---

### ä¸éœ€è¦ç¼–ç çš„éƒ¨åˆ†

* ç‰¹å®šçš„ç¬¦å·ç»„åˆ
  * æ¯”å¦‚è¥¿é‡Œå°”å­—æ¯ä¿®é¥°ã€æ³°è¯­ä¿®é¥°å’ŒåŸºæœ¬å­—æ¯é—´ä»…å­˜åœ¨æœ‰é™ç»„åˆ
  * Unicodeå¹¶æœªä¸€ç»„åˆä¸€ç 
    * è®¾è®¡ä¸ºæ­£äº¤ç¼–ç ç³»ç»Ÿï¼Œä»¥èŠ‚çœç ä½
    * å¤æ‚æƒ…å†µçš„å­—ç¬¦æ’ç‰ˆç”±CTLï¼ˆComplex Text Layoutï¼‰å†³å®š
      * å¤©åŸæ–‡åˆå­—ï¼ˆLigatureï¼‰ï¼š à¤¦ + à¥ + à¤§ + à¥ + à¤° + à¥ + à¤¯ = à¤¦à¥à¤§à¥à¤°à¥à¤¯ 
      * åˆå­—ä¹Ÿå¯ä»¥ç”±å­—ä½“å†³å®š - [Jetbrains Mono](https://www.jetbrains.com/lp/mono/)
* ä¼šå¯¼è‡´è¶…å‡ºåŸåº”ç”¨èŒƒå›´çš„æ–‡å­—æ¸²æŸ“å‡ºç°ï¼Œæ¯”å¦‚æ³°è¯­ä¿®é¥°ç¬¦çš„æ— é™å åŠ 
  * ä¾‹å¦‚ï¼šà¸ªà¹‡à¹‡à¹‡à¹‡à¹‡à¹‡à¹‡à¹‡à¹‡à¹‡à¹‡à¹‡à¹‡à¹‡à¹‡à¹‡à¹‡à¹‡à¹‡à¹‡à¹‡à¹‡à¹‡à¹‡à¹‡à¹‡à¹‡à¹‡à¹‡à¹‡à¹‡à¹‡à¹‡à¹‡à¹‡à¹‡à¹‡à¹‡à¹‡à¹‡à¹‡
  * ä½†æ˜¯å®é™…ä¸Šåœ¨è¯­è¨€ä¸­å¹¶ä¸å­˜åœ¨è¿™ä¸ªæ–‡å­—

---

### Quizï¼šå…¨ä¸–ç•Œçš„â€œç›²æ–‡â€æ˜¯å¦ä¸€æ ·ï¼Ÿ

---

### ç›²æ–‡

ç”±æ³•å›½äºº Braille å‘æ˜çš„è¯­è¨€ã€‚
ç±»æ¯”äº ASCII çš„ç¼–ç ç³»ç»Ÿ â€”â€” å­˜å‚¨ã€è§£ç å‡åªæœ‰æœ‰é™çš„åˆ†è¾¨ç‡ã€‚

å¯¹äºLatinç³»æ–‡å­—ï¼Œå¯¹åº”26ä¸ªå­—æ¯ã€‚å„è¯­è¨€åœ¨å…¶éŸ³ç¬¦ã€è”æ‹¼çš„å˜ç§ã€‚

å¯¹äºæ±‰è¯­ï¼Œæ˜¯è¡¨éŸ³æ–‡å­—ï¼ˆç±»ä¼¼æ‹¼éŸ³ï¼‰ï¼›é˜¿æ‹‰ä¼¯æ•°å­—åŒè‹±æ–‡ç›²æ–‡ï¼Œé€‰æ‹©äº† Braille å¼ã€‚

æ—¥æœ¬æ±‰å­—ç›²æ–‡æŒ‰ç…§å­—æ ¹è®¾è®¡ã€‚

Unicode: +2800 to +28FF

---

### ä»æ–‡å­—åˆ°æ¸²æŸ“

æ–‡å­—ç³»ç»Ÿ
-> å­—å…ƒ 
-> å­—ç¬¦é›†ï¼ˆå­—å…ƒ->é¡ºåºï¼‰
-> ç¼–ç æ–¹æ¡ˆ/ç¼–ç ï¼ˆæ•´æ•°->å­—èŠ‚ï¼‰
-> å­—ä½“æŸ¥æ‰¾ -> Fallback 
-> å­—å½¢æŸ¥æ‰¾ -> Fallback 
-> å­—å½¢æ¸²æŸ“ (Glyph processing)

<sup>1</sup> [Microsoft Typography documentation](https://learn.microsoft.com/en-us/typography/)
<sup>2</sup> [IDWriteFontFallback::MapCharacters method (dwrite_2.h)](https://learn.microsoft.com/en-us/windows/win32/api/dwrite_2/nf-dwrite_2-idwritefontfallback-mapcharacters)

---

å­—ç¬¦é›†

* å­—ç¬¦çš„åˆé›†ï¼Œä¸ºæ¯ä¸ªå­—ç¬¦æä¾›å”¯ä¸€çš„è¡¨ç¤ºï¼ˆä¸ä¸€å®šæ˜¯ä¸€ä¸ªæ•´æ•°ï¼‰
* JIS X 0208-1990ä¸­ï¼Œâ€œå·¥â€å­—ä½äº25åŒº09ç‚¹

ç¼–ç æ–¹æ¡ˆ

* EUC-JP: åŒå­—èŠ‚ç¼–ç  - `{åŒº+160, ç‚¹+160}`
* Shift_JIS: åŒå­—èŠ‚ç¼–ç  - `{...ç¼–ç å¾ˆå¤æ‚..., ...ç¼–ç ä¹Ÿå¾ˆå¤æ‚...}`
  * ã€ŒåŒºã€ãŒ01ï½61ã®å¥‡æ•°ã®å ´åˆ:ã€ŒåŒºã€ã«257ã‚’åŠ ãˆã¦2ã§å‰²ã£ãŸå€¤ã‚’1ãƒã‚¤ãƒˆç›®ã¨ã—ã¾ã™ã€‚ ã€Œç‚¹ã€ãŒ01ï½63ãªã‚‰63ã‚’åŠ ãˆãŸå€¤ã‚’ã€ã•ã‚‚ãªãã°64ã‚’åŠ ãˆãŸå€¤ã‚’2ãƒã‚¤ãƒˆç›®ã¨ã—ã¾ã™ã€‚
  * å…¼å®¹ JIS X 0208-1990; 0208-1983; JIS C 6226-1978 å­—ç¬¦é›†

---

<style scoped>
  ul {
    font-size: 0.9em;
    margin-top: 0.5em;
    margin-bottom: 0.5em
  }
  p {
    margin-top: 0.7em;
  }
</style>
### å‰ Unicode

ä¸åŒç³»ç»Ÿã€ä¸åŒè¯­è¨€ã€ä¸åŒåœ°åŒºå‡å¯èƒ½æœ‰å„è‡ªç‹¬ç«‹çš„ç¼–ç æ ‡å‡†

(US-)ASCII (American Standard Code for Information Interchange)
* Control code
	* `00`  NULL / `07` BELL
	* `09` HT/SK (Horizontal Tab) / `0B` VTAB (Vertical Tab)
	* `0A` LF (Line Feed) / `0D` CR (Carriage Return)
* Printable Characters
	* Letters, Digits, Prunctions, and other symbols

---
### å‰ Unicode

ISCII (Indian -)

ArmSCII (Armenian -)

PASCII(Perso-Arbic -)

ATASCII (Atari), ...

---

### å‰ Unicode
GB/T 2312-1980 (GB2312)  å›½æ ‡/æ¨èï¼ˆéå¼ºåˆ¶ï¼‰
* Hanzi
* Non-Hanzi
  * Punctuation/Symbols,  List Markers, ISO 646-CN, Hiraganaï¼ˆå¹³å‡ï¼‰, Katakanaï¼ˆç‰‡å‡ï¼‰, Greek and vertical, Cyrillic, zhuyin and non-ASCII pinyin, box drawing
* æ‰©å±•åŠå®ç°
	* Encoding: EUC-CN, ISO-2022-CN, HZ
	* Succeed/Extension: GB/T 12345, GBK, GB18030

---

### å‰ Unicode

GBK
* æ‰©å±•åŠå®ç°
	* (Windows) CP936
		* GBKæœ€å¹¿æ³›ä½¿ç”¨çš„ç¼–ç æ–¹æ³•
	* (IBM) CP1386/IBM-1386
		* IBM's CP936 is also a Simplified Chinese code page but unused

---

### å‰Unicode

BIG5
* å¤§äº”ç ï¼Œæ¸¯æ¾³å°ä½¿ç”¨çš„ç¹ä½“å­—çš„ç¼–ç æ ‡å‡†
* æ‰©å±•åŠå®ç°
	* (Windows) CP950

---
<style scoped>
  img {
    left: 30%;
    margin-top: -15%;
    height: 100%;
    position: relative;
  }
</style>
### å‰ Unicode

Shift-JIS

![](media/Euler_diag_for_jp_charsets.svg)

---

### å‰ Unicode

ISO/IEC-8859 è¥¿æ¬§å­—ç¬¦é›†
* 1: 29 Languages, includes English, Spanish, Italian, PorNorwegian, Irish, ...
* 15: Superset of 1, more languages/more rare characters supported, for e.g. Å  in Finnish

Most Popular Implementation/Extension: Windows-1252 (CP1252) 

---

### ä¹±ç 

![](media/Lightmatter_panda.jpg)

---
<style scoped>
  p {
    margin-top: 0.5em;
  }
</style>
### ä¹±ç 

æ–‡å­—ç³»ç»Ÿ(writing system) -> å­—å…ƒ/ç¬¦å·(grapheme/symbol)

-> ç¼–ç å­—ç¬¦é›†(character set)ï¼ˆå­—å…ƒ->åºåˆ—ï¼‰

-> ç¼–ç æ–¹æ¡ˆ/ç¼–ç ï¼ˆåºåˆ—->å­—èŠ‚ï¼‰

-> å­—ä½“æŸ¥æ‰¾ -> å­—å½¢æŸ¥æ‰¾ -> Fallback (e.g. IDWriteFontFallback)

-> å­—å½¢æ¸²æŸ“ (Glyph processing)

---
<style scoped>
  img { width: 60%; }
</style>

å­—å½¢æ¸²æŸ“æ˜¯ä¸ªå¤§è¯é¢˜ï¼š

éœ€è¦å¤„ç† ä½ç½®ã€å°ºå¯¸ã€åŸºçº¿ã€è‚©é«˜ã€ä¸Šä¸‹æ ‡ã€å¯¹é½ã€å¾®è°ƒã€æŠ—é”¯é½¿ã€è¿å­—(Ligature)ã€åˆå­—ï¼ˆéƒ¨åˆ†æ”¯æŒï¼‰ ç­‰è¯¸å¤šç‰¹æ€§ã€‚

![](https://github.com/microsoft/cascadia-code/blob/main/images/ligatures.png?raw=true)


---

### ä¹±ç 

1 åº”ç”¨ç¨‹åºä¸æ•°æ®çš„ç¼–ç æ ¼å¼/å­—ç¬¦é›†ä¸åŒ

2 ç¼ºå°‘å­—ä½“æ–‡ä»¶

3 åº”ç”¨ç¨‹åºè‡ªèº«çš„é”™è¯¯

4 é”™è¯¯çš„å°†ä¸€èˆ¬çš„äºŒè¿›åˆ¶æ•°æ®ç†è§£ä¸ºæ–‡å­—

<br>

* **ç¤ºä¾‹ä»£ç **

---

### ä¹±ç çš„è‡ªåŠ¨ç”„åˆ«å·¥å…·å¦‚ä½•è¯†åˆ«ä¹±ç ï¼Ÿ

* åŸºäºç»Ÿè®¡ç†è®º â€”â€” çœ‹èµ·æ¥åƒ

* é€‚ç”¨äºæ•´æ®µæ–‡å­—éš¶å±åŒä¸€å­—ç¬¦é›†

---
<style scoped>
  ul { font-size: 0.8em; }
  p {font-size: 0.9em;}
</style>

### Unicode

è§£å†³æ··æ’æ–‡å­—æ— æ³• Trivial è¡¨è¾¾çš„é—®é¢˜
* æ¯”å¦‚ä¸€ä¸ªæ•°ç»„ä¸­åŒæ—¶å­˜æœ‰æ±‰è¯­ã€éŸ©è¯­ã€è¶Šå—æ–‡å­—ï¼Œè¦å¦‚ä½•è¡¨è¾¾ï¼Ÿ
  * Unicodeä¹‹å‰å¹¶ä¸å­˜åœ¨è¿™æ ·çš„å•ä¸€ä»£ç é¡µã€‚

CJKæ–‡å­—çš„è·¨è¯­è¨€æœç´¢

è§£å†³ç½•ç”¨å­—ç¬¦çš„è¡¨è¾¾ç‚¹ä½
* å¦åˆ™éœ€è¦å¼€ä¸ªè°éƒ½ä¸ä¼šå»æ”¯æŒçš„ä»£ç é¡µ
* ç”šè‡³è¿è·¨ç³»ç»Ÿçš„Emojiéƒ½ä¸ä¼šæœ‰

çµæ´»ä¸”æ ‡å‡†çš„ç¼–ç å½¢å¼ â€”â€” å¯å˜å•å­—èŠ‚ï¼Œå¯å˜åŒå­—èŠ‚ï¼Œå®šé•¿å››å­—ç¬¦ï¼Œåº”æœ‰å°½æœ‰

---

### Unicode ç ä½æ¦‚è§ˆ

UCS-2/4

<iframe src="https://zh.m.wikipedia.org/wiki/Unicode%E5%AD%97%E7%AC%A6%E5%B9%B3%E9%9D%A2%E6%98%A0%E5%B0%84"></iframe>

---

### UTF-16

åœ¨BMPä¸Šï¼Œç­‰ä»·äºUCS-2ã€‚æˆ–è€…è¯´ â€”â€” UCS-2 å°±æ˜¯ä¸æ”¯æŒ Surrogate Pair çš„ UTF-16

---
<style scoped>
  ul {
    margin-top: 0.4em;
    font-size: 0.75em;
  }
  p {
    margin-top: 0.8em;
  }
</style>

### ä¸‹æœŸé¢„å‘Š

UTF: Unicodeç ä½çš„ç¼–ç 
* UTF-8/16/32

C++ ä¸­çš„å­—ç¬¦è¡¨è¾¾
* `char`; `wchar_t`;
* `char8_t`; `char16_t`; `char32_t`;
* `u8"æµ‹è¯•"`, `u"æµ‹è¯•"`, `U"æµ‹è¯•"`, `L"æµ‹è¯•"`, `_T("æµ‹è¯•")`

ç¼–ç å­—ç¬¦é›†è½¬æ¢

å¤šå­—èŠ‚å­—ç¬¦çš„å¤„ç†